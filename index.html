<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù…ØªØ¬Ø± + Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© (Ù†Ø³Ø®Ø© HTML)</title>
  <style>
    :root{
      --bg:#0f1720; --panel:#101217; --muted:#99a0b3; --accent:#8b5cf6; --card:#111318;
      --light-bg:#f6f7fb; --light-panel:#fff; --light-text:#0b1220;
    }
    html,body{height:100%; margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans Arabic',sans-serif;}
    body{background:var(--bg); color:#e6eef8; display:flex; min-height:100vh;}
    .container{display:flex; width:100%;}
    /* Sidebar */
    .sidebar{width:320px; max-width:38vw; background:linear-gradient(180deg,#0b0d11, #121316); padding:20px; box-sizing:border-box; box-shadow:6px 0 18px rgba(0,0,0,0.6);}
    .profile{display:flex; gap:12px; align-items:center; margin-bottom:18px}
    .avatar{width:64px; height:64px; border-radius:50%; background:conic-gradient(from 180deg,#7c3aed,#06b6d4); display:flex; align-items:center; justify-content:center; font-weight:700; font-size:20px;}
    .user-info{flex:1}
    .user-name{font-weight:700; font-size:16px}
    .user-sub{color:var(--muted); font-size:13px; margin-top:6px}
    /* nav */
    .nav{margin-top:6px; display:flex; flex-direction:column; gap:8px}
    .nav a{display:flex; align-items:center; gap:10px; padding:12px; border-radius:8px; text-decoration:none; color:inherit;}
    .nav a .ico{width:36px; text-align:center}
    .nav a:hover{background:rgba(255,255,255,0.03)}
    .nav a.active{background:rgba(255,255,255,0.06)}
    .divider{height:1px; background:rgba(255,255,255,0.04); margin:12px 0}
    .dark-toggle{display:flex; justify-content:space-between; align-items:center; gap:10px; margin-top:14px}
    .toggle-btn{width:46px; height:26px; background:#2b2b2b; border-radius:20px; position:relative; cursor:pointer}
    .toggle-knob{width:18px; height:18px; background:#fff; border-radius:50%; position:absolute; top:4px; left:4px; transition:all .18s}
    /* content */
    .main{flex:1; padding:20px; box-sizing:border-box; overflow:auto}
    header.top{display:flex; justify-content:space-between; align-items:center; gap:10px; margin-bottom:18px}
    .search{display:flex; gap:8px; align-items:center}
    .search input{padding:10px 12px; border-radius:12px; border:0; background:#0b1116; color:inherit}
    h1{margin:0 0 6px 0}
    /* Grid */
    .grid{display:grid; grid-template-columns: repeat(auto-fit,minmax(180px,1fr)); gap:14px}
    .card{background:var(--card); padding:12px; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.5)}
    .card .img{height:96px; border-radius:8px; background:linear-gradient(90deg,#0f1720,#101827); margin-bottom:8px}
    .price{font-weight:700; color:#9ae6b4}
    .buy{margin-top:8px; width:100%; padding:8px; background:#ef4444; border:0; color:#fff; border-radius:8px; cursor:pointer}
    /* Admin */
    .admin-panel{background:linear-gradient(180deg,#071018, #07121a); padding:16px; border-radius:12px}
    .stats{display:flex; gap:12px; flex-wrap:wrap}
    .stat{flex:1; min-width:160px; background:#071b2a; padding:12px; border-radius:10px}
    .stat .label{color:var(--muted); font-size:13px}
    .stat .val{font-size:20px; font-weight:700}
    .orders-table{margin-top:12px; overflow:auto}
    table{width:100%; border-collapse:collapse; font-size:14px}
    th,td{padding:8px 10px; text-align:right; border-bottom:1px solid rgba(255,255,255,0.03)}
    /* light mode */
    .light body-mode{--bg:var(--light-bg); --panel:var(--light-panel); --muted:#4b5563; --card:#fff; color:var(--light-text)}
    /* small screens */
    @media (max-width:780px){
      .sidebar{position:fixed; left:0; top:0; bottom:0; transform:translateX(0); z-index:30; width:78%; max-width:320px; transition:transform .18s}
      .sidebar.hidden{transform:translateX(-110%)}
      .main{padding:14px}
    }
    /* rtl small polish */
    .rtl-right{margin-right:8px}
    /* login modal */
    .modal{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.5); z-index:60}
    .modal .box{background:var(--panel); padding:18px; border-radius:10px; width:320px; max-width:92%}
    .btn{padding:10px 12px; border-radius:8px; border:0; cursor:pointer}
    .btn-primary{background:var(--accent); color:white}
    .small-muted{color:var(--muted); font-size:13px}
  </style>
</head>
<body>
  <div class="container" id="app">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="profile">
        <div class="avatar" id="avatar">Ø¹Ø¨</div>
        <div class="user-info">
          <div class="user-name" id="userName">Ø¹Ø¨Ø¯Ø§Ù„Ø¨Ø§Ø³Ø· Ø§Ù„Ø¹Ø¨ÙˆØ¯</div>
          <div class="user-sub" id="userSub">VIP 10 â€¢ $1.197</div>
        </div>
      </div>

      <nav class="nav">
        <a href="#" data-view="shop" class="active"><span class="ico">ğŸ </span><span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></a>
        <a href="#" data-view="topup"><span class="ico">ğŸ’³</span><span>Ø§Ø¶Ø§ÙØ© Ø±ØµÙŠØ¯</span></a>
        <a href="#" data-view="payments"><span class="ico">ğŸ’¸</span><span>Ø¯ÙØ¹Ø§ØªÙŠ</span></a>
        <a href="#" data-view="wallets"><span class="ico">ğŸ’¼</span><span>Ù…Ø­ÙØ¸ØªÙŠ</span></a>
        <a href="#" data-view="orders"><span class="ico">ğŸ›’</span><span>Ø·Ù„Ø¨Ø§ØªÙŠ</span></a>
        <a href="#" data-view="admin" id="adminLink"><span class="ico">ğŸ§¾</span><span>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span></a>
      </nav>

      <div class="divider"></div>

      <div class="dark-toggle">
        <div>Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†</div>
        <div class="toggle-btn" id="darkToggle"><div class="toggle-knob" id="toggleKnob"></div></div>
      </div>

      <div style="height:12px"></div>
      <div class="small-muted">Ø£Ø¯ÙˆØ§Øª Ø³Ø±ÙŠØ¹Ø©</div>
      <div style="margin-top:8px; display:flex; gap:8px">
        <button class="btn" id="openSearch">ğŸ”</button>
        <button class="btn" id="openWhats">ğŸ’¬</button>
        <button class="btn" id="openShare">â†—ï¸</button>
      </div>
    </aside>

    <!-- Main content -->
    <main class="main">
      <header class="top">
        <div>
          <h1 id="pageTitle">Ø§Ù„Ù…ØªØ¬Ø±</h1>
          <div class="small-muted" id="pageSub">ØªØ³ÙˆÙ‚ Ø®Ø¯Ù…Ø§Øª Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© Ø³Ø±ÙŠØ¹Ø©</div>
        </div>
        <div class="search">
          <input placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø®Ø¯Ù…Ø©..." id="searchInput" />
          <button class="btn btn-primary" id="btnLogin">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±Ù</button>
        </div>
      </header>

      <!-- Views -->
      <section id="viewShop">
        <div class="grid" id="productsGrid"></div>
      </section>

      <section id="viewAdmin" style="display:none">
        <div class="admin-panel">
          <h2>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
          <p class="small-muted">Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø³Ø±ÙŠØ¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØ§Ù„Ø±ØµÙŠØ¯</p>
          <div class="stats" style="margin-top:12px">
            <div class="stat">
              <div class="label">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†</div>
              <div class="val" id="statUsers">0</div>
            </div>
            <div class="stat">
              <div class="label">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
              <div class="val" id="statOrders">0</div>
            </div>
            <div class="stat">
              <div class="label">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ÙƒÙ„ÙŠ</div>
              <div class="val" id="statBalance">$0.000</div>
            </div>
          </div>

          <div style="margin-top:14px">
            <h3>Ø·Ù„Ø¨Ø§Øª API (Ù„Ù…Ø­Ø© Ø³Ø±ÙŠØ¹Ø©)</h3>
            <div class="orders-table">
              <table id="ordersTable">
                <thead><tr><th>Ø§Ù„Ø±Ù‚Ù…</th><th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th></tr></thead>
                <tbody></tbody>
              </table>
            </div>
          </div>

          <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap">
            <button class="btn btn-primary" id="seedBtn">Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©</button>
            <button class="btn" id="clearBtn">Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
          </div>
        </div>
      </section>

      <section id="viewTopup" style="display:none">
        <div class="card">
          <h3>Ø§Ø¶Ø§ÙØ© Ø±ØµÙŠØ¯ ØªØ¬Ø±ÙŠØ¨ÙŠ</h3>
          <div style="margin-top:8px">
            <label>Ø§Ù„Ù…Ø¨Ù„Øº (USD)</label>
            <input id="topupAmount" style="width:120px;padding:8px;border-radius:8px;border:0;background:#0b1116;color:inherit;margin-right:8px" />
            <button class="btn btn-primary" id="doTopup">Ø§Ø¶Ø§ÙØ©</button>
          </div>
        </div>
      </section>

      <section id="viewPayments" style="display:none">
        <div class="card">
          <h3>Ø¯ÙØ¹Ø§ØªÙŠ</h3>
          <p class="small-muted">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯ÙØ¹Ø§Øª (ØªØ¬Ø±ÙŠØ¨ÙŠØ©)</p>
        </div>
      </section>

      <section id="viewWallets" style="display:none">
        <div class="card">
          <h3>Ù…Ø­ÙØ¸ØªÙŠ</h3>
          <p class="small-muted">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø­ÙØ¸Ø© (ØªØ¬Ø±ÙŠØ¨ÙŠØ©)</p>
        </div>
      </section>

      <section id="viewOrders" style="display:none">
        <div class="card">
          <h3>Ø·Ù„Ø¨Ø§ØªÙŠ</h3>
          <div style="margin-top:8px" id="myOrdersList"></div>
        </div>
      </section>

    </main>
  </div>

  <!-- Login Modal -->
  <div id="loginModal" class="modal" style="display:none">
    <div class="box">
      <h3>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±Ù</h3>
      <p class="small-muted">Ø§Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…Ø´Ø±Ù (ØªØ¬Ø±ÙŠØ¨ÙŠ)</p>
      <div style="margin-top:12px">
        <input id="adminPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" style="width:100%;padding:10px;border-radius:8px;border:0;background:#0b1116;color:inherit" />
      </div>
      <div style="margin-top:12px; display:flex; gap:8px; justify-content:flex-end">
        <button class="btn" id="cancelLogin">Ø¥Ù„ØºØ§Ø¡</button>
        <button class="btn btn-primary" id="confirmLogin">Ø¯Ø®ÙˆÙ„</button>
      </div>
    </div>
  </div>

  <script>
    // ---------- Demo data & helpers ----------
    const demoProducts = Array.from({length:9}).map((_,i)=>({
      id: 'p'+(i+1),
      title: 'Ø®Ø¯Ù…Ø© Ø±Ù‚Ù… ' + (i+1),
      price: ((i+1)*0.25).toFixed(3)
    }));
    let state = {
      products: demoProducts,
      orders: JSON.parse(localStorage.getItem('demo_orders')||'[]'),
      usersCount: Number(localStorage.getItem('demo_users')||3),
      balance: Number(localStorage.getItem('demo_balance')||1.197)
    };

    const el = id => document.getElementById(id);
    const qs = s => document.querySelector(s);
    const qsa = s => document.querySelectorAll(s);

    // ---------- Render products ----------
    function renderProducts(filter=''){
      const grid = el('productsGrid');
      grid.innerHTML = '';
      const items = state.products.filter(p => p.title.includes(filter) || p.price.includes(filter));
      items.forEach(p=>{
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <div class="img"></div>
          <div style="display:flex; justify-content:space-between; align-items:center; gap:8px">
            <div style="text-align:right">
              <div style="font-weight:700">${p.title}</div>
              <div class="small-muted" style="margin-top:6px">ÙˆØµÙ Ù‚ØµÙŠØ± Ù„Ù„Ø®Ø¯Ù…Ø©</div>
            </div>
            <div style="text-align:left">
              <div class="price">$${p.price}</div>
              <button class="buy" data-id="${p.id}">Ø§Ø´ØªØ±ÙŠ</button>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });
    }

    // ---------- Views switching ----------
    const views = ['shop','admin','topup','payments','wallets','orders'];
    function showView(name){
      views.forEach(v=>{
        const s = document.getElementById('view'+capitalize(v));
        if(!s) return;
        s.style.display = (v===name)? 'block' : 'none';
      });
      // nav active
      qsa('.nav a').forEach(a=>{
        a.classList.toggle('active', a.dataset.view === name);
      });
      el('pageTitle').innerText = (name==='shop')? 'Ø§Ù„Ù…ØªØ¬Ø±' : (name==='admin')? 'Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©' : (name==='topup')? 'Ø§Ø¶Ø§ÙØ© Ø±ØµÙŠØ¯' : (name==='orders')? 'Ø·Ù„Ø¨Ø§ØªÙŠ' : 'Ø§Ù„Ù…ØªØ¬Ø±';
    }
    function capitalize(s){ return s.charAt(0).toUpperCase()+s.slice(1); }

    // ---------- Admin / login (very simple demo) ----------
    function openLogin(){ el('loginModal').style.display='flex'; }
    function closeLogin(){ el('loginModal').style.display='none'; el('adminPass').value=''; }

    function setAdminLogged(flag){
      localStorage.setItem('isAdmin', flag ? '1' : '0');
      el('adminLink').style.display = flag ? 'inline-flex' : 'none';
      el('btnLogin').innerText = flag? 'Ø®Ø±ÙˆØ¬ Ø§Ù„Ù…Ø´Ø±Ù' : 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø´Ø±Ù';
    }

    function seedDemoData(){
      // create some demo orders
      state.orders = [
        {id: 'o1', user: 'user1', amount: 2.5, status:'Pending'},
        {id: 'o2', user: 'user2', amount: 0.75, status:'Processing'},
        {id: 'o3', user: 'user3', amount: 1.0, status:'Accepted'},
      ];
      state.usersCount = 12;
      state.balance = 178.09;
      localStorage.setItem('demo_orders', JSON.stringify(state.orders));
      localStorage.setItem('demo_users', state.usersCount);
      localStorage.setItem('demo_balance', state.balance);
      renderAdminOverview();
      alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©');
    }

    function clearDemoData(){
      state.orders = [];
      state.usersCount = 0;
      state.balance = 0;
      localStorage.removeItem('demo_orders');
      localStorage.removeItem('demo_users');
      localStorage.removeItem('demo_balance');
      renderAdminOverview();
      alert('ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
    }

    function renderAdminOverview(){
      el('statUsers').innerText = state.usersCount;
      el('statOrders').innerText = state.orders.length;
      el('statBalance').innerText = '$' + (state.balance||0).toFixed(3);
      // table
      const tbody = el('ordersTable').querySelector('tbody');
      tbody.innerHTML = '';
      state.orders.forEach((o, idx) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${idx+1}</td><td>${o.user}</td><td>$${o.amount}</td><td>${o.status}</td>`;
        tbody.appendChild(tr);
      });
    }

    // ---------- Orders (user) ----------
    function addOrder(product){
      const ord = { id: 'o'+Date.now(), user: 'you', amount: Number(product.price), status: 'Pending' };
      state.orders.push(ord);
      localStorage.setItem('demo_orders', JSON.stringify(state.orders));
      // increment users example
      state.usersCount = (Number(localStorage.getItem('demo_users')||0) || 3);
      state.usersCount += 0; // no change
      localStorage.setItem('demo_users', state.usersCount);
      alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨ (ØªØ¬Ø±ÙŠØ¨ÙŠ)\nØ§Ù„Ù…Ø¨Ù„Øº: $' + product.price);
      renderMyOrders();
      renderAdminOverview();
    }

    function renderMyOrders(){
      const list = el('myOrdersList');
      list.innerHTML = '';
      const mine = state.orders.filter(o => o.user === 'you' || o.user==='user1' || true).slice(0,6);
      mine.forEach(o=>{
        const d = document.createElement('div');
        d.style.padding='8px'; d.style.marginTop='6px'; d.style.background='rgba(255,255,255,0.02)'; d.style.borderRadius='8px';
        d.innerHTML = `<div style="display:flex;justify-content:space-between"><div>${o.user}</div><div class="small-muted">$${o.amount}</div></div><div class="small-muted" style="margin-top:6px">${o.status}</div>`;
        list.appendChild(d);
      });
    }

    // ---------- Dark toggle ----------
    let darkOn = true;
    function applyDark(){
      document.body.style.background = darkOn ? 'var(--bg)' : 'var(--light-bg)';
      // move knob
      el('toggleKnob').style.left = darkOn ? '24px' : '4px';
      // change toggle color
      el('darkToggle').querySelector('.toggle-btn').style.background = darkOn ? 'var(--accent)' : '#2b2b2b';
      // small cosmetic
      document.body.style.color = darkOn ? '#e6eef8' : '#0b1220';
      // panel variables (simple)
      if(!darkOn){
        document.documentElement.style.setProperty('--bg', '#f6f7fb');
        document.documentElement.style.setProperty('--panel', '#fff');
        document.documentElement.style.setProperty('--muted', '#4b5563');
        document.documentElement.style.setProperty('--card', '#fff');
      }else{
        document.documentElement.style.setProperty('--bg', '#0f1720');
        document.documentElement.style.setProperty('--panel', '#101217');
        document.documentElement.style.setProperty('--muted', '#99a0b3');
        document.documentElement.style.setProperty('--card', '#111318');
      }
    }

    // ---------- Events binding ----------
    document.addEventListener('click', (e)=>{
      if(e.target.matches('.buy')) {
        const id = e.target.dataset.id;
        const p = state.products.find(x=>x.id===id);
        if(p) addOrder(p);
      }
      if(e.target.matches('.nav a')) {
        e.preventDefault();
      }
    });

    // nav links
    qsa('.nav a').forEach(a=>{
      a.addEventListener('click', (ev)=>{
        ev.preventDefault();
        const v = a.dataset.view;
        if(v==='admin'){
          // require admin login
          const isAdmin = localStorage.getItem('isAdmin') === '1';
          if(!isAdmin){
            openLogin(); return;
          }
        }
        showView(v);
      });
    });

    // login dialog
    el('btnLogin').addEventListener('click', ()=>{
      const isAdmin = localStorage.getItem('isAdmin') === '1';
      if(isAdmin){
        // logout
        setAdminLogged(false);
        alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ ÙƒÙ…Ø´Ø±Ù');
        return;
      }
      openLogin();
    });
    el('cancelLogin').addEventListener('click', closeLogin);
    el('confirmLogin').addEventListener('click', ()=>{
      const v = el('adminPass').value.trim();
      // demo password: admin
      if(v === 'admin'){
        setAdminLogged(true);
        closeLogin();
        alert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø´Ø±Ù (ØªØ¬Ø±ÙŠØ¨ÙŠ)');
        showView('admin');
        renderAdminOverview();
      } else {
        alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø© (ØªØ¬Ø±ÙŠØ¨ÙŠ). Ø§Ø³ØªØ®Ø¯Ù…: admin');
      }
    });

    // seed / clear
    el('seedBtn').addEventListener('click', seedDemoData);
    el('clearBtn').addEventListener('click', clearDemoData);

    // topup
    el('doTopup').addEventListener('click', ()=>{
      const v = Number(el('topupAmount').value || 0);
      if(!v){ alert('Ø§Ø¯Ø®Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­'); return; }
      state.balance += v;
      localStorage.setItem('demo_balance', state.balance);
      renderAdminOverview();
      alert('ØªÙ… Ø§Ø¶Ø§ÙØ© Ø§Ù„Ø±ØµÙŠØ¯: $' + v.toFixed(3));
    });

    // search
    el('searchInput').addEventListener('input', (e)=> renderProducts(e.target.value));

    // admin link visibility depending on login
    (function init(){
      const isAdmin = localStorage.getItem('isAdmin') === '1';
      setAdminLogged(isAdmin);
      renderProducts();
      renderAdminOverview();
      renderMyOrders();
      // dark knob position
      el('toggleKnob').style.left = darkOn ? '24px' : '4px';
      el('darkToggle').addEventListener('click', ()=>{ darkOn = !darkOn; applyDark(); });
      // product buy clicks (delegate)
      document.addEventListener('click', (ev)=>{
        if(ev.target && ev.target.classList && ev.target.classList.contains('buy')){
          // handled above
        }
      });
      // mobile: hide sidebar when clicking main area
      document.querySelector('.main').addEventListener('click', ()=>{
        if(window.innerWidth <= 780) document.getElementById('sidebar').classList.add('hidden');
      });
      // toggle sidebar on small screens via avatar click
      document.querySelector('.avatar').addEventListener('click', ()=>{
        if(window.innerWidth <= 780) document.getElementById('sidebar').classList.toggle('hidden');
      });
    })();

  </script>
</body>
</html>
